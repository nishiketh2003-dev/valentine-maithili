<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Maithili üíò</title>
  <style>
    :root{
      --bg1:#ffd6e7;
      --bg2:#e7d6ff;
      --yes:#ff4d8d;
      --no:#111827;
      --card:#ffffffcc;
      --text:#1f1235;
      --muted: rgba(31,18,53,.72);
      --shadow: 0 22px 70px rgba(0,0,0,.18);
      --radius: 28px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, var(--bg2), transparent 55%),
        radial-gradient(900px 700px at 80% 30%, var(--bg1), transparent 60%),
        linear-gradient(135deg, #fff, #ffeaf2);
      overflow:hidden;
    }

    /* Floating hearts layer */
    .hearts{
      position:fixed; inset:0; pointer-events:none; opacity:.28;
      background-image:
        radial-gradient(circle at 10px 10px, rgba(255,105,180,.42) 0 6px, transparent 7px),
        radial-gradient(circle at 30px 40px, rgba(255,0,102,.25) 0 5px, transparent 6px),
        radial-gradient(circle at 60px 15px, rgba(255,105,180,.25) 0 4px, transparent 5px);
      background-size: 80px 80px;
      animation: drift 12s linear infinite;
      filter: blur(.2px);
    }
    @keyframes drift{ from{transform:translateY(0)} to{transform:translateY(90px)} }

    .card{
      width:min(720px, 92vw);
      background:var(--card);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.6);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:26px 22px 22px;
      position:relative;
      text-align:center;
      z-index: 5;
    }

    .top{
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }

    .photo{
      width: 210px;
      height: 210px;
      border-radius: 24px;
      background: #fff;
      overflow:hidden;
      box-shadow: 0 12px 28px rgba(0,0,0,.12);
      display:grid;
      place-items:center;
      position:relative;
    }
    .photo img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .photo .fallback{
      font-size:64px;
      filter: drop-shadow(0 10px 12px rgba(0,0,0,.15));
      animation: bounce 1.4s ease-in-out infinite;
    }
    @keyframes bounce{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }

    h1{
      margin:0;
      font-size: clamp(26px, 3.4vw, 40px);
      letter-spacing:-.02em;
    }
    .typing{
      margin: 8px auto 0;
      font-size: 16px;
      color: var(--muted);
      min-height: 24px;
      width: min(520px, 92vw);
    }
    .cursor{
      display:inline-block;
      width: 10px;
      margin-left:2px;
      animation: blink .9s infinite;
    }
    @keyframes blink{ 0%,49%{opacity:1} 50%,100%{opacity:0} }

    .btn-row{
      margin-top:18px;
      display:flex;
      gap:14px;
      justify-content:center;
      align-items:center;
      flex-wrap:wrap;
      position:relative;
      min-height:72px;
    }

    button{
      border:none;
      border-radius:16px;
      padding:14px 18px;
      font-size:16px;
      font-weight:800;
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease, opacity .12s ease;
      box-shadow: 0 12px 22px rgba(0,0,0,.14);
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    button:active{transform: translateY(1px) scale(.99)}
    #yesBtn{ background: var(--yes); color:white; }
    #noBtn{
      background: var(--no); color:white;
      position:absolute;
      left: 52%;
      top: 8px;
      z-index: 10;
    }
    .hint{
      margin-top:12px;
      font-size:13px;
      opacity:.7;
    }

    /* Modal */
    .modal{
      position:fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.35);
      padding: 18px;
      z-index:50;
    }
    .modal.show{display:flex}
    .modal-card{
      width:min(560px, 92vw);
      background:white;
      border-radius:26px;
      padding:22px 18px;
      text-align:center;
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .big{
      font-size: clamp(24px, 3.2vw, 34px);
      margin:0 0 8px;
    }
    .sub{
      margin:0 0 14px;
      opacity:.85;
      line-height:1.35;
    }
    .close{
      margin-top:6px;
      background:#111827;
      color:white;
      border-radius:14px;
      padding:12px 16px;
      font-weight:900;
    }

    /* Confetti pieces */
    .confetti{
      position:absolute;
      width:10px; height:16px;
      opacity:.95;
      transform: translateY(-120vh);
      animation: fall 1.7s ease-in forwards;
    }
    @keyframes fall{
      to{ transform: translateY(120vh) rotate(820deg); }
    }

    .footer-note{
      margin-top: 14px;
      font-size: 12px;
      opacity:.6;
    }
  </style>
</head>
<body>
  <div class="hearts"></div>

  <main class="card" id="card">
    <div class="top">
      <div class="photo" aria-hidden="true">
        <!-- If your photos load, this img shows. Otherwise emoji fallback shows. -->
        <img id="photoEl" src="photo1.jpeg" alt="" onload="document.getElementById('emojiFallback').style.display='none'" onerror="this.style.display='none'" />
        <span class="fallback" id="emojiFallback">üêª‚Äç‚ùÑÔ∏è</span>
      </div>

      <div>
        <h1 id="title">Maithili, will you be my Valentine? üíò</h1>
        <div class="typing">
          <span id="typed"></span><span class="cursor">|</span>
        </div>
      </div>
    </div>

    <div class="btn-row" id="btnRow">
      <button id="yesBtn">Yes üíñ</button>
      <button id="noBtn">No üôÉ</button>
    </div>

    <div class="hint" id="hint">Try clicking ‚ÄúNo‚Äù üòà</div>
    <div class="footer-note">Made with love (and mild button harassment).</div>
  </main>

  <div class="modal" id="modal" role="dialog" aria-modal="true">
    <div class="modal-card" id="modalCard">
      <h2 class="big">YAYYYYY!!! üíûü•≥</h2>
      <p class="sub" id="successText"></p>
      <button class="close" id="closeBtn">Okay, I‚Äôm yours ‚ù§Ô∏è</button>
    </div>
  </div>

  <script>
  // ====== CUSTOMIZE HERE ======
  const CONFIG = {
    targetName: "Maithili",
    lines: [
      "Okay listen‚Ä¶ no pressure üòá",
      "But you + me = cutest Valentine ever üíò",
      "Will you be my Valentine?"
    ],
    successMessage: "YAYYY üíû\nSee you on Feb 14? ü•∞‚ù§Ô∏è",

    // Your photos are in repo ROOT and are .jpeg
    photos: ["photo1.jpeg", "photo2.jpeg", "photo3.jpeg"],
    photoChangeMs: 2500,

    // No-button behavior
    maxDodges: 18,
    shrinkNoEachTime: 0.06,
    growYesEachTime: 0.07,
  };

  const NO_PHRASES = [
    "No üôÉ",
    "Are you sure? üò≥",
    "Think again üò§",
    "Pleaseeee ü•∫",
    "Last chance üòà",
    "Okay fine‚Ä¶ üòî"
  ];

  // ====== ELEMENTS ======
  const title = document.getElementById("title");
  const typed = document.getElementById("typed");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn = document.getElementById("noBtn");
  const modal = document.getElementById("modal");
  const modalCard = document.getElementById("modalCard");
  const closeBtn = document.getElementById("closeBtn");
  const successText = document.getElementById("successText");
  const emojiFallback = document.getElementById("emojiFallback");
  const photoEl = document.getElementById("photoEl");

  // Guard: if any of these are null, the script would crash
  if (!yesBtn || !noBtn || !modal || !closeBtn) {
    console.error("Missing required elements. Check IDs in HTML.");
  }

  // Title + success message
  title.textContent = `${CONFIG.targetName}, will you be my Valentine? üíò`;
  successText.textContent = CONFIG.successMessage;

  // ====== TYPING ======
  async function typeLine(line, speed = 28) {
    for (let i = 0; i < line.length; i++) {
      typed.textContent += line[i];
      await new Promise(r => setTimeout(r, speed));
    }
  }
  async function backspace(count, speed = 18) {
    for (let i = 0; i < count; i++) {
      typed.textContent = typed.textContent.slice(0, -1);
      await new Promise(r => setTimeout(r, speed));
    }
  }
  async function runTyping() {
    for (let i = 0; i < CONFIG.lines.length; i++) {
      typed.textContent = "";
      await typeLine(CONFIG.lines[i]);
      if (i !== CONFIG.lines.length - 1) {
        await new Promise(r => setTimeout(r, 700));
        await backspace(CONFIG.lines[i].length);
        await new Promise(r => setTimeout(r, 220));
      }
    }
  }

  // ====== PHOTOS ======
  function startSlideshow() {
    if (!photoEl || !CONFIG.photos?.length) return;

    let idx = 0;

    // Set initial image
    photoEl.src = CONFIG.photos[0];

    // When image loads, hide emoji
    photoEl.onload = () => {
      if (emojiFallback) emojiFallback.style.display = "none";
    };

    // If image fails, show emoji (but don't crash)
    photoEl.onerror = () => {
      if (emojiFallback) emojiFallback.style.display = "inline-block";
    };

    setInterval(() => {
      idx = (idx + 1) % CONFIG.photos.length;
      photoEl.src = CONFIG.photos[idx];
    }, CONFIG.photoChangeMs);
  }

  // ====== NO BUTTON TELEPORT (full screen) ======
  function placeNoButton() {
  const padding = 12;

  // Get Yes button position to avoid overlapping it
  const yesRect = yesBtn.getBoundingClientRect();

  const bw = noBtn.offsetWidth;
  const bh = noBtn.offsetHeight;

  // Try a few times to find a spot that doesn't overlap Yes
  for (let tries = 0; tries < 30; tries++) {
    const maxX = window.innerWidth - bw - padding;
    const maxY = window.innerHeight - bh - padding;

    const x = padding + Math.random() * Math.max(0, maxX - padding);
    const y = padding + Math.random() * Math.max(0, maxY - padding);

    // Candidate rectangle for No button
    const noRect = {
      left: x,
      top: y,
      right: x + bw,
      bottom: y + bh
    };

    // Check overlap with Yes button (add some extra "personal space")
    const buffer = 40;
    const yesBuffered = {
      left: yesRect.left - buffer,
      top: yesRect.top - buffer,
      right: yesRect.right + buffer,
      bottom: yesRect.bottom + buffer
    };

    const overlapsYes =
      noRect.left < yesBuffered.right &&
      noRect.right > yesBuffered.left &&
      noRect.top < yesBuffered.bottom &&
      noRect.bottom > yesBuffered.top;

    // If it doesn't overlap Yes, place it
    if (!overlapsYes) {
      noBtn.style.position = "fixed";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
      noBtn.style.zIndex = "20";
      return;
    }
  }

  // Fallback: if we failed 30 times, just put it top-left-ish
  noBtn.style.position = "fixed";
  noBtn.style.left = padding + "px";
  noBtn.style.top = padding + "px";
  noBtn.style.zIndex = "20";
}


  function confettiBurst(count = 110) {
    const colors = ["#ff4d8d", "#ffb703", "#4cc9f0", "#22c55e", "#a855f7", "#fb7185"];
    for (let i = 0; i < count; i++) {
      const c = document.createElement("div");
      c.className = "confetti";
      c.style.left = Math.random() * 100 + "%";
      c.style.background = colors[Math.floor(Math.random() * colors.length)];
      c.style.animationDelay = (Math.random() * 0.35) + "s";
      c.style.borderRadius = (Math.random() > 0.5) ? "3px" : "999px";
      c.style.width = (6 + Math.random() * 10) + "px";
      c.style.height = (10 + Math.random() * 16) + "px";
      modalCard.appendChild(c);
      setTimeout(() => c.remove(), 2200);
    }
  }

  let dodges = 0;
  let yesScale = 1;
  let noScale = 1;

  function dodge() {
    dodges++;

    // change text each time
    noBtn.textContent = NO_PHRASES[Math.min(dodges, NO_PHRASES.length - 1)];

    // emoji reactions
    const emojis = ["ü•∫", "üò≥", "üò≠", "ü´£", "ü§≠", "üòà", "üíò", "üß∏", "üêª‚Äç‚ùÑÔ∏è"];
    if (emojiFallback) emojiFallback.textContent = emojis[Math.floor(Math.random() * emojis.length)];

    // grow yes + shrink no
    yesScale = 1 + Math.min(dodges * CONFIG.growYesEachTime, 1.2);
    yesBtn.style.transform = `scale(${yesScale})`;

    //noScale = Math.max(1 - dodges * CONFIG.shrinkNoEachTime, 0.35);
    //noBtn.style.transform = `scale(${noScale})`;
    noBtn.style.opacity = String(Math.max(1 - dodges * 0.03, 0.6));

    // stop after max dodges
    if (dodges >= CONFIG.maxDodges) {
      noBtn.textContent = "Okay fine üòî";
      // stop dodging
      noBtn.replaceWith(noBtn.cloneNode(true)); // removes old listeners safely
      const newNoBtn = document.getElementById("noBtn");
      newNoBtn.textContent = "Okay fine üòî";
      newNoBtn.style.position = "fixed";
      newNoBtn.style.left = noBtn.style.left;
      newNoBtn.style.top = noBtn.style.top;
      newNoBtn.style.transform = noBtn.style.transform;
      newNoBtn.style.opacity = noBtn.style.opacity;
      return;
    }

    placeNoButton();
  }

  // ====== EVENTS ======
  function wireEvents() {
    yesBtn.addEventListener("click", () => {
      modal.classList.add("show");
      confettiBurst();
    });

    closeBtn.addEventListener("click", () => {
      modal.classList.remove("show");
    });

    ["mouseenter", "click", "touchstart"].forEach(evt => {
      noBtn.addEventListener(evt, (e) => {
        if (evt === "touchstart") e.preventDefault();
        dodge();
      }, { passive: false });
    });

    window.addEventListener("resize", () => {
      // keep it on screen after resize
      placeNoButton();
    });
  }

  // ====== INIT ======
  window.addEventListener("load", () => {
    placeNoButton();
    runTyping();
    startSlideshow();
    wireEvents();
  });
</script>

</body>
</html>
